# é«˜çº§é…ç½®æŒ‡å—

> æœ¬æ–‡æ¡£åŒ…å« GPU é…ç½®ã€Windows ç‰¹æ®Šå¤„ç†ã€Chroma Cloud è¯¦ç»†é…ç½®ç­‰é«˜çº§è®¾ç½®ã€‚

---

## 1. Chroma Cloud é…ç½®

æœ¬é¡¹ç›®ä½¿ç”¨ **Chroma Cloud** ä½œä¸ºå‘é‡æ•°æ®åº“ï¼Œéœ€è¦é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

### 1.1 å¿…éœ€é…ç½®

| ç¯å¢ƒå˜é‡ | è¯´æ˜ |
|---------|------|
| `CHROMA_CLOUD_API_KEY` | Chroma Cloud API å¯†é’¥ |
| `CHROMA_CLOUD_TENANT` | Chroma Cloud ç§Ÿæˆ· ID |
| `CHROMA_CLOUD_DATABASE` | Chroma Cloud æ•°æ®åº“åç§° |

### 1.2 é…ç½®æ­¥éª¤

1. åœ¨ Chroma Cloud å¹³å°åˆ›å»ºè´¦æˆ·å¹¶è·å–è¿æ¥ä¿¡æ¯ã€‚
2. åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½®ä¸Šè¿°ä¸‰ä¸ªç¯å¢ƒå˜é‡ã€‚
3. å¯åŠ¨åº”ç”¨åä¼šè‡ªåŠ¨è¿æ¥åˆ° Chroma Cloudã€‚

### 1.3 æ³¨æ„äº‹é¡¹

- Chroma Cloud éœ€è¦ç½‘ç»œè¿æ¥ï¼Œè¯·ç¡®ä¿ç½‘ç»œç•…é€šã€‚
- é…ç½®é”™è¯¯æ—¶ä¼šç›´æ¥æŠ›å‡ºé”™è¯¯ï¼Œä¸ä¼šå›é€€åˆ°æœ¬åœ°æ¨¡å¼ã€‚
- å‘é‡æ•°æ®å­˜å‚¨åœ¨äº‘ç«¯ï¼Œæ— éœ€æœ¬åœ°å­˜å‚¨ç›®å½•ã€‚

---

## 2. GPU é…ç½®ï¼ˆå¯é€‰ï¼‰

é¡¹ç›®æ”¯æŒ **GPU ä¼˜å…ˆã€CPU å…œåº•** æ¨¡å¼ã€‚

### 2.1 ä¸ºä»€ä¹ˆéœ€è¦æ‰‹åŠ¨é…ç½®

ç”±äº `uv` åœ¨ Windows å¹³å°ä¸Šé»˜è®¤é”å®š CPU ç‰ˆæœ¬çš„ PyTorchï¼Œ**éœ€è¦æ‰‹åŠ¨å®‰è£… CUDA ç‰ˆæœ¬** ä»¥è·å¾— GPU åŠ é€Ÿã€‚

### 2.2 å®‰è£…æ­¥éª¤

```bash
# 1. å®‰è£…åŸºç¡€ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨æ‰§è¡Œï¼‰
make install

# 2. æ‰‹åŠ¨å®‰è£… CUDA ç‰ˆæœ¬çš„ PyTorchï¼ˆè¦†ç›– CPU ç‰ˆæœ¬ï¼‰
uv pip install --force-reinstall --index-url https://download.pytorch.org/whl/cu121 torch torchvision torchaudio

# 3. éªŒè¯å®‰è£…
uv run --no-sync python -c "import torch; print(f'ç‰ˆæœ¬: {torch.__version__}'); print(f'CUDA å¯ç”¨: {torch.cuda.is_available()}')"
```

### 2.3 æ€§èƒ½å¯¹æ¯”

| æ¨¡å¼ | ç´¢å¼•æ„å»ºæ—¶é—´ |
|------|-------------|
| ğŸš€ **GPU æ¨¡å¼** | çº¦ 5 åˆ†é’Ÿ |
| ğŸŒ **CPU æ¨¡å¼** | çº¦ 30 åˆ†é’Ÿ+ |

### 2.4 æ³¨æ„äº‹é¡¹

- é¡¹ç›®å¯ä»¥åœ¨çº¯ CPU ç¯å¢ƒè¿è¡Œï¼Œä½†æ€§èƒ½è¾ƒæ…¢ã€‚
- åœ¨ Windows å¹³å°ä¸Šéœ€è¦æ‰‹åŠ¨å®‰è£… GPU ç‰ˆæœ¬ä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚
- **å®‰è£… CUDA ç‰ˆæœ¬åï¼Œé¿å…å†æ¬¡è¿è¡Œ `make install`ã€`make ready`ã€`make start` ç­‰ä¼šè§¦å‘ `uv sync` çš„å‘½ä»¤**ï¼ˆä¼šè¦†ç›– CUDA ç‰ˆæœ¬ï¼‰ã€‚
- æ—¥å¸¸ä½¿ç”¨åªéœ€ `make run` å¯åŠ¨åº”ç”¨ï¼Œå·²è‡ªåŠ¨é…ç½® `--no-sync` é€‰é¡¹ã€‚

---

## 3. Windows ç‰¹æ®Šé…ç½®

### 3.1 å®‰è£… Make å·¥å…·

Windows ç”¨æˆ·éœ€å…ˆå®‰è£… Make å·¥å…·ï¼š

```powershell
choco install make -y
```

> è¯¦ç»†å®‰è£…è¿‡ç¨‹ï¼š [Windows Make å·¥å…·å®‰è£…æŒ‡å—](../agent-task-log/archive/2025-10/2025-10-09-3_ã€bugfixã€‘Windows-Makeå·¥å…·å®‰è£…ä¸Makefileé…ç½®-å¿«é€Ÿæ‘˜è¦.md)

### 3.2 PowerShell ç¼–ç é—®é¢˜

å¦‚æœé‡åˆ°ä¹±ç ï¼Œä½¿ç”¨ PowerShell åŒ…è£…è„šæœ¬ï¼š

```powershell
.\Makefile.ps1 run   # ä½¿ç”¨ PowerShell åŒ…è£…è„šæœ¬ï¼ˆå·²ä¿®å¤ UTF-8 ç¼–ç ï¼‰
```

---

## 4. é…ç½®ç³»ç»Ÿè¯¦è§£

åº”ç”¨æä¾›ç»Ÿä¸€çš„é…ç½®ç®¡ç†ç³»ç»Ÿã€‚

### 4.1 ä¾§è¾¹æ é…ç½®

å¸¸ç”¨é…ç½®ï¼ˆå®æ—¶ç”Ÿæ•ˆï¼‰ï¼š
- æ¨¡å‹é€‰æ‹©
- LLM é¢„è®¾
- æ£€ç´¢ç­–ç•¥
- Agentic RAG å¼€å…³

### 4.2 è®¾ç½®å¼¹çª—

é«˜çº§é…ç½®ï¼š
- RAG å‚æ•°ï¼ˆTop-Kã€ç›¸ä¼¼åº¦é˜ˆå€¼ã€é‡æ’åºå¼€å…³ï¼‰
- æ˜¾ç¤ºè®¾ç½®

### 4.3 LLM é¢„è®¾

| é¢„è®¾ | Temperature | Max Tokens | é€‚ç”¨åœºæ™¯ |
|------|-------------|------------|---------|
| ç²¾ç¡® | 0.1 | 2048 | äº‹å®æ€§æŸ¥è¯¢ |
| å¹³è¡¡ | 0.5 | 4096 | é€šç”¨åœºæ™¯ |
| åˆ›æ„ | 0.9 | 8192 | å¼€æ”¾æ€§é—®é¢˜ |

### 4.4 RAG å‚æ•°

- **Top-K**ï¼šæ£€ç´¢è¿”å›çš„æ–‡æ¡£æ•°é‡ã€‚
- **ç›¸ä¼¼åº¦é˜ˆå€¼**ï¼šè¿‡æ»¤ä½ç›¸ä¼¼åº¦ç»“æœã€‚
- **é‡æ’åºå¼€å…³**ï¼šå¯ç”¨ / ç¦ç”¨é‡æ’åºã€‚

---

## 5. ä¸»é¢˜åˆ‡æ¢

åº”ç”¨æ”¯æŒ **Light/Dark æ¨¡å¼** åˆ‡æ¢ï¼š

- ç‚¹å‡»å³ä¸Šè§’ "âš™" â†’ "Settings" â†’ é€‰æ‹©ä¸»é¢˜ã€‚
- æˆ–ä½¿ç”¨ç³»ç»Ÿä¸»é¢˜åå¥½è‡ªåŠ¨åˆ‡æ¢ã€‚
- æ‰€æœ‰ç»„ä»¶ï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰ç»„ä»¶ï¼‰éƒ½ä¼šè‡ªåŠ¨é€‚é…ä¸»é¢˜ã€‚

---

## 6. å¸¸ç”¨å‘½ä»¤

```bash
make              # å®‰è£…ä¾èµ– + è¿è¡Œæµ‹è¯•ï¼ˆæ¨èé¦–æ¬¡è¿è¡Œï¼‰
make run          # å¯åŠ¨ Web åº”ç”¨
make start        # = make + make runï¼ˆä¸€é”®å¯åŠ¨ï¼‰
make help         # æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
make test         # è¿è¡Œæ‰€æœ‰æµ‹è¯•
make clean        # æ¸…ç†ç”Ÿæˆæ–‡ä»¶
```

---

## 7. Serena (MCP ä»£ç è¯­ä¹‰æ£€ç´¢å·¥å…·) é›†æˆ

Serena æä¾›åŸºäº LSP çš„ç¬¦å·çº§æ£€ç´¢å’Œç¼–è¾‘èƒ½åŠ›ï¼Œæ›´é€‚åˆå¤§è§„æ¨¡ä»£ç åº“çš„å®šä½ã€è·¨æ–‡ä»¶å˜æ›´ä¸é‡æ„ã€‚

### 7.1 VSCode / Cursor (MCP) é…ç½®

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.vscode/mcp.json`ï¼ˆæœ¬ä»“åº“å·²å®Œæˆæœ¬åœ°é…ç½®ï¼‰ï¼š

```json
{
  "servers": {
    "serena": {
      "command": "uvx",
      "args": [
        "--from",
        "git+https://github.com/oraios/serena",
        "serena-mcp",
        "--context",
        "ide-assistant",
        "--project",
        "${workspaceFolder}"
      ]
    }
  }
}
```

> æ³¨æ„ï¼šå½“å‰ `.gitignore` é»˜è®¤å¿½ç•¥ `.vscode/`ï¼Œå¦‚éœ€æäº¤æ­¤é…ç½®ï¼Œè¯·ç›¸åº”è°ƒæ•´ `.gitignore` çš„å¿½ç•¥è§„åˆ™ã€‚

### 7.2 é¡¹ç›®é…ç½®ä¸ç´¢å¼•ï¼ˆå¯é€‰ï¼‰

åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œå¯ç”¨ Serena CLI è‡ªåŠ¨ç”Ÿæˆ `.serena/project.yml`ï¼Œå¹¶é€‰æ‹©åˆ›å»ºç´¢å¼•ï¼š

```bash
uvx --from git+https://github.com/oraios/serena serena project create --index
```

å¦‚éœ€é‡æ–°æ„å»ºç´¢å¼•ï¼Œå¯ç›´æ¥æ‰§è¡Œï¼š

```bash
uvx --from git+https://github.com/oraios/serena serena project index
```

---

**æœ€åæ›´æ–°**: 2026-01-31
