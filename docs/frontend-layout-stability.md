# 主内容区（右侧）尺寸不稳定分析

## 现象

页面右侧（主内容区）的宽度/高度经常变化，视觉上不稳定。

## 原因

1. **主内容区无固定宽度**
   - 未对主内容块设置 `min-width` / `max-width`，随视口与内容变化。
   - Streamlit 默认主区域会随窗口和内部内容重排。

2. **内容高度随状态变化**
   - 无对话 → 快速开始；有对话 → 标题 + 消息列表，高度不同。
   - 每条助手消息后可选：观察器摘要（L0）、L1 关键节点（expander）、L2 完整链路（expander）、引用来源。
   - 这些块出现/展开会拉高主区域，产生跳动。
   - 每次 rerun 后布局重算，滚动条出现/消失也会影响视觉宽度。

3. **输入行 columns**
   - `st.columns([1.5, 0.5, 2, 1])` 为比例布局，小视口下会挤压，中间 spacer 与按钮列比例变化，可能造成输入区宽度观感不稳定。

## 已采取的缓解

- 在 `frontend/main.py` 的 `_CUSTOM_CSS` 中为主内容区（`.block-container`）设置稳定的 `max-width` 与 `min-width`，减少主区宽度随视口/内容变化。

## 若仍不稳定可考虑

- 为「延续块」预留最小高度（min-height），减少观察器/来源加载后的布局位移（CLS）。
- 微调输入行 columns 比例或给 spacer 固定占比，避免窄屏下过小列宽。
