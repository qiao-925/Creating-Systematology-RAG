# /browser-visual-regression

## 1. Command Summary
- 目的：执行视觉回归测试，对比当前 UI 与基准状态
- 触发时机：代码修改后需要验证 UI 未破坏时
- 关联规则：`browser_visual_editor_integration.mdc`
- 依赖工具：`@browser`

## 2. 输入
- 可选：测试页面列表、对比模式（严格/宽松）

## 3. 执行步骤
1. 确保应用已启动
2. 使用 `@browser` 打开应用
3. 遍历测试页面：
   - 主页
   - 聊天界面
   - 设置面板
   - 其他关键页面
4. 截图记录当前状态
5. 与基准截图对比（如存在）：
   - 像素级对比
   - 布局对比
   - 颜色对比
6. 识别差异：
   - 预期差异（标记为通过）
   - 意外差异（标记为失败）
7. 生成对比报告：
   - 差异截图
   - 差异位置标注
   - 差异原因分析
8. 更新基准截图（如测试通过）

## 4. 输出
- 测试页面列表
- 对比结果（通过/失败）
- 差异截图路径
- 差异分析报告
- 基准截图更新状态

## 5. 基准截图管理
- **位置**：`screenshots/baseline/`
- **命名**：`<page_name>_<timestamp>.png`
- **更新策略**：测试通过后自动更新

## 6. 示例
```
用户：/browser-visual-regression 对比主页和聊天界面

执行：
1. 打开浏览器
2. 截图主页（当前状态）
3. 对比基准截图
4. 截图聊天界面（当前状态）
5. 对比基准截图
6. 生成差异报告
```
