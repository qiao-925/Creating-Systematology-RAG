# 浏览器自动化命令快速参考

> 一键式命令，简化浏览器可视化编辑和测试工作流

---

## 🚀 快速开始

### 1. 启动应用并打开浏览器
```
/browser-start
```
- 自动检查应用是否运行
- 如未运行，自动启动 Streamlit
- 自动在浏览器中打开
- 截图记录初始状态

### 2. 可视化编辑 UI
```
/browser-edit 调整聊天输入框圆角为 20px，边框颜色改为 #6366f1
```
- 自动定位元素
- 使用可视化编辑器调整
- 自动应用更改到代码
- 验证效果

### 3. 自动化测试
```
/browser-test 功能测试 - 测试聊天输入和查询响应
/browser-test 视觉回归 - 对比主页和聊天界面
/browser-test 响应式 - 测试不同屏幕尺寸
```
- 自动执行测试场景
- 截图记录关键状态
- 生成测试报告

### 4. 无障碍审计
```
/browser-a11y 检查主页和聊天界面的无障碍性
```
- 检查颜色对比度
- 验证键盘导航
- 检查 ARIA 标签
- 生成改进建议

### 5. 视觉回归测试
```
/browser-visual-regression 对比主页和聊天界面
```
- 截图记录当前状态
- 与基准截图对比
- 识别视觉差异
- 生成对比报告

### 6. 重启并测试（修复后验证）⭐ 推荐
```
/browser-restart-and-test
```
- **自动分析上下文**：从对话历史、代码变更中提取测试内容
- **强制重启应用**（停止现有进程）
- 启动新应用
- **自动生成测试场景**：根据修复内容智能生成验证点
- 自动执行测试
- 验证修复效果
- 生成测试报告

**智能特性**：
- ✅ **无需用户提供测试内容**：自动从上下文分析
- ✅ **自动识别修复类型**：主题/配置/CSS/功能修复
- ✅ **自动生成验证点**：根据修复内容生成测试步骤
- ✅ **智能测试选择**：自动选择功能/视觉/全部测试

**适用场景**：
- ✅ **代码修复完成后验证**（最常用）
- ✅ 配置更改后验证
- ✅ 需要确保应用完全重启的场景

**示例**：
```
用户：修复完成，主题配置修复，CSS样式增强，JavaScript错误处理
用户：/browser-restart-and-test

Agent 自动：
1. 分析修复内容（主题、CSS、JS）
2. 生成验证点（主题配置、样式应用、控制台错误）
3. 执行测试
4. 生成报告
```

---

## 📋 常用工作流

### UI 开发流程
```
/browser-start
/browser-edit 调整聊天输入框样式
/browser-test 功能测试
/browser-visual-regression
```

### 无障碍改进流程
```
/browser-start
/browser-a11y
/browser-edit 修复颜色对比度问题
/browser-a11y  # 再次验证
```

### 完整测试流程
```
/browser-start
/browser-test 功能测试
/browser-test 响应式
/browser-visual-regression
/browser-a11y
```

### 修复后验证流程（推荐）
```
/browser-restart-and-test 验证主题配置修复和控制台错误减少
```
- 一键完成：重启 → 测试 → 验证 → 报告
- 自动过滤已知警告
- 根据修复内容生成验证点

---

## 📚 详细文档

- 完整规范：`.cursor/rules/browser_visual_editor_integration.mdc`
- 命令详情：`.cursor/commands/browser_automation/*.md`

---

## 💡 提示

- 所有命令都会自动处理应用启动（如未运行）
- 命令可以组合使用，形成完整工作流
- 截图自动保存到 `screenshots/` 目录
- 测试报告自动生成并保存
