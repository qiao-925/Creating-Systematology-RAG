---
description: Agent 测试体系整合规则（简化版）
alwaysApply: false
---

# Agent 测试体系整合规则（简化版）

> **核心原则**: 代码修改后必须运行单元测试验证

---

## ⚠️ 强制要求

### 代码修改后必须执行（按顺序）：

1. **选择单元测试**
   ```bash
   python tests/tools/agent_test_selector.py <修改的文件路径>
   # 只选择 tests/unit/ 目录下的测试
   ```

2. **运行单元测试**
   ```bash
   pytest tests/unit/test_xxx.py -v
   ```

3. **记录测试结果**
   - 通过 ✅ / 失败 ❌
   - 如有失败，分析原因并修复

---

## 🚫 禁止行为

- ❌ **禁止运行集成测试/E2E测试**（需要环境依赖）
- ❌ **禁止跳过测试步骤**
- ❌ **禁止在测试失败时继续**

---

## 📋 快速检查清单

修改代码后必须完成：
- [ ] 使用 `agent_test_selector.py` 选择相关单元测试
- [ ] 运行单元测试（`pytest tests/unit/test_xxx.py -v`）
- [ ] 记录测试结果
- [ ] 如有失败，修复后重新运行

---

## 📚 详细说明

完整规则和详细说明请参考：
- `agent-testing-integration.mdc` - 详细版本（Manual）
- `tests/agent/README.md` - 测试体系索引（整合版）

---

**最后更新**: 2025-01-27  
**版本**: 简化版 v1.0
