---
description: 遵循文档规范 - 包含文件长度限制、标题序号规范、日期处理规范等通用规则
alwaysApply: true
---

# 文档规范

> 通用文档规则和限制

---


## 2. 文档标题序号规范（强制要求）

**⚠️ 强制要求**：所有文档的标题必须带序号，增强可读性和层次结构

**核心原则**：
- ✅ **一级标题（H1）**：不需要序号（文档主标题）
- ✅ **二级标题（H2）**：使用 `## 1. 标题` 格式
- ✅ **三级标题（H3）**：使用 `### 1.1 标题` 格式
- ✅ **四级标题（H4）**：使用 `#### 1.1.1 标题` 格式
- ✅ **序号连续**：同级标题序号连续（1, 2, 3...）
- ✅ **层次清晰**：不同级别使用不同深度（1, 1.1, 1.1.1...）

**正确示例**：
```markdown
# 文档主标题（H1，无序号）

## 1. 第一部分（H2，一级序号）
内容...

## 2. 第二部分（H2，一级序号）
内容...

### 2.1 子部分一（H3，二级序号）
内容...

### 2.2 子部分二（H3，二级序号）
内容...

#### 2.2.1 详细说明（H4，三级序号）
内容...

#### 2.2.2 更多说明（H4，三级序号）
内容...
```

**错误示例**：
```markdown
# 文档主标题

## 第一部分（❌ 缺少序号）
## 第二部分（❌ 缺少序号）
### 子部分（❌ 序号不连续，应该是 1.1）
### 另一个子部分（❌ 序号不连续，应该是 1.2）
```

**应用范围**：
- ✅ 所有 Markdown 文档（`.md` 文件）
- ✅ 所有规则文件（`.mdc` 文件）
- ✅ 所有任务日志（`agent-task-log/*.md`）
- ✅ 所有项目文档（`docs/*.md`）

**例外情况**：
- ❌ 文档主标题（H1）不需要序号
- ❌ 简短文档（<50行）可以适当放宽，但推荐使用序号

---

## 3. 文档长度限制规范

**强制要求**：所有文档文件不允许超过 300 行（与代码文件限制一致）

**核心原则**：
- ✅ 标准限制：单个文档 ≤ 300 行
- ✅ 超过限制：必须请求用户拆分或申请扩展（最大500行）
- ✅ 拆分原则：按主题、模块、职责边界拆分

---

## 4. 日期处理规范（强制要求）

**⚠️ 强制要求**：所有文档中的日期必须使用系统当前日期，格式 `YYYY-MM-DD`

### 4.1 核心原则

- ✅ **必须使用系统当前日期**：通过 `date +%Y-%m-%d` 命令获取，或使用系统当前日期
- ✅ **格式必须为 `YYYY-MM-DD`**：四位年份-两位月份-两位日期（如 `2025-11-05`）
- ✅ **禁止使用硬编码日期**：不要使用文档中的示例日期或模板日期
- ✅ **更新后必须验证**：更新日期后必须验证格式是否正确

### 4.2 应用场景

**必须使用当前日期的场景**：
- ✅ 文档末尾的"最后更新"日期
- ✅ 任务日志文件名：`YYYY-MM-DD-N_任务名称_文档类型.md`
- ✅ 任务日志内容中的日期字段（如"分析日期"、"执行日期"、"校验日期"等）
- ✅ 规则执行日志中的日期字段
- ✅ 优化分析报告中的日期字段

### 4.3 操作步骤（强制要求）

**每次更新文档日期时，必须按以下步骤执行**：

1. **获取系统当前日期** ✅
   ```bash
   date +%Y-%m-%d
   ```
   - 执行此命令获取当前日期（格式：`YYYY-MM-DD`）
   - 或在文档中明确说明使用系统当前日期

2. **更新文档中的日期字段** ✅
   - 将所有 `YYYY-MM-DD` 占位符替换为实际日期
   - 将所有示例日期（如 `2025-01-27`）替换为当前日期
   - 确保所有日期字段格式一致

3. **验证日期格式** ✅
   - 检查日期格式是否为 `YYYY-MM-DD`（如 `2025-11-05`）
   - 检查年份是否为当前年份（四位数字）
   - 检查月份和日期是否合理（01-12, 01-31）
   - 验证文件名中的日期格式是否正确

### 4.4 常见错误示例

**❌ 错误示例**：
```markdown
**最后更新**: 2025-01-27  # ❌ 使用硬编码日期，不是当前日期
**分析日期**: YYYY-MM-DD  # ❌ 使用占位符，未替换为实际日期
**执行日期**: 2025-11-04  # ❌ 如果不是当前日期，则为错误
```

**✅ 正确示例**：
```markdown
**最后更新**: 2025-11-05  # ✅ 使用系统当前日期（通过 date +%Y-%m-%d 获取）
**分析日期**: 2025-11-05  # ✅ 使用系统当前日期
**执行日期**: 2025-11-05  # ✅ 使用系统当前日期
```

### 4.5 验证检查清单

更新日期后，必须检查以下项目：

- [ ] 是否已获取系统当前日期（通过 `date +%Y-%m-%d` 命令）
- [ ] 是否已将所有 `YYYY-MM-DD` 占位符替换为实际日期
- [ ] 是否已将所有示例日期替换为当前日期
- [ ] 日期格式是否为 `YYYY-MM-DD`（四位年份-两位月份-两位日期）
- [ ] 年份是否为当前年份（四位数字）
- [ ] 月份和日期是否合理（01-12, 01-31）
- [ ] 文件名中的日期格式是否正确

### 4.6 日期格式说明

**标准格式**：`YYYY-MM-DD`
- `YYYY`：四位年份（如 `2025`）
- `MM`：两位月份（如 `01`, `11`）
- `DD`：两位日期（如 `05`, `27`）

**示例**：
- ✅ `2025-11-05`（正确）
- ✅ `2025-01-27`（格式正确，但必须是当前日期）
- ❌ `2025-1-5`（错误，月份和日期必须是两位数）
- ❌ `25-11-05`（错误，年份必须是四位数）
- ❌ `2025/11/05`（错误，必须使用连字符 `-`）

---

**最后更新**: 2025-11-05  
**版本**: v2.1（增强日期处理规范，添加操作步骤和验证方法）
