---
description: 任务中 - 规则设计生成规范 - 设计或优化规则时的元规则指南
alwaysApply: false
manualTrigger: true
---
# 任务中 - 规则设计生成规范

> 适用于创建、优化或评估规则体系的任务。目标是产出简洁、清晰、可执行且易维护的规则。

---

## 1. 适用范围
- Agent Requested 规则：当你明确要求“设计/优化规则”时加载本规范。
- 包含新建规则、拆分合并、制定触发方式、撰写说明文档等场景。

---

## 2. 设计基线
- [ ] 单条规则 ≤ 500 行；核心要求放在前 50 行内。
- [ ] 使用检查清单或步骤式语句，避免大段叙述。
- [ ] 标题自 H2 起必须带编号，层级递进清晰。
- [ ] 元数据完整：`description` 描述场景；`alwaysApply`/`autoAttach`/`manualTrigger` 与实际一致；Auto 规则提供 `globs`。

---

## 3. 结构规划清单

### 3.1 规则类型判定
- [ ] 判断是否为所有任务共享（Always）。
- [ ] 若仅在命中目录时需要，配置 `globs` 并设为 Auto Attached。
- [ ] 若需按指令启用，设为 Agent Requested；说明使用场景。
- [ ] 特殊场景需手动引用的，标记为 Manual 并文档化触发方式。

### 3.2 内容组织
- [ ] 汇总关键要求 → 转换成 `- [ ]` 项。
- [ ] 按“适用范围 → 执行清单 → 验收标准 → 参考”结构编排。
- [ ] 冗长背景或示例迁移到 README / 日志，只在正文引用。
- [ ] 所有禁止事项用 `❌` 明确列出。

---

## 4. 可执行性与校验
- [ ] 为每个阶段给出可执行动作，避免模糊动词。
- [ ] 指定输出物：如方案文档、日志、校验记录等。
- [ ] 设计时同步更新 `后置规则 - 规则执行校验报告.mdc` 以覆盖新规则。
- [ ] 未能执行的规则需提供补救流程（记录原因、补测、复查）。

---

## 5. 维护策略
- [ ] 行数逼近上限时优先拆分（按主题/职责）。
- [ ] 当规则失效或被忽略时，检查 description 与触发方式是否准确。
- [ ] 定期复查 README 中的规则组合映射，确保与实际一致。
- [ ] 更新后在日志中记录变更原因、影响范围与验证结果。

---

## 6. 检查清单（提交前核对）
- [ ] 规则类型、触发方式、适用范围写明。
- [ ] 核心要求位于前段并以清单呈现。
- [ ] 行数、标题编号、格式符合文档规范。
- [ ] 相关 README / 日志 / 校验规则已同步更新。

---

## 7. 参考资料
- 规则总览：`.cursor/rules/README.md`
- 文档规范：`任务中 - 文档规范.mdc`
- 规则校验：`后置规则 - 规则执行校验报告.mdc`

---

## 8. 版本信息

- **最后更新**：2025-11-09
- **版本**：v2.0（精简为清单化模板并对齐官方长度建议）
