# 2026-01-24 ã€planã€‘GitHub å¯¼å…¥è¿›åº¦å¯è§†åŒ– - å®æ–½è®¡åˆ’

**ä»»åŠ¡ç±»å‹**: plan  
**æ—¥æœŸ**: 2026-01-24  
**ä»»åŠ¡ç¼–å·**: #1  
**Agent**: Claude Opus 4.5

---

## Checkpoint çŠ¶æ€è¡¨

| CP | é˜¶æ®µ | çŠ¶æ€ | å®Œæˆæ—¥æœŸ |
|----|------|------|----------|
| CP1 | ä»“åº“é¢„æ£€åŠŸèƒ½ | â¬œ å¾…å¼€å§‹ | - |
| CP2 | è¿›åº¦ç®¡ç†å™¨ + é˜¶æ®µæ€§å–æ¶ˆ | â¬œ å¾…å¼€å§‹ | - |
| CP3 | å‰ç«¯è¿›åº¦ç»„ä»¶ | â¬œ å¾…å¼€å§‹ | - |
| CP4 | é›†æˆä¸æµ‹è¯• | â¬œ å¾…å¼€å§‹ | - |

---

## èƒŒæ™¯ä¸ç›®æ ‡

### èƒŒæ™¯

å½“å‰ GitHub å¯¼å…¥æµç¨‹çš„ç”¨æˆ·ä½“éªŒé—®é¢˜ï¼š
- é•¿æ—¶é—´ç­‰å¾…æ— åé¦ˆï¼ˆåªæœ‰ spinnerï¼‰
- æ— æ³•çŸ¥é“è¿›åº¦å’Œå½“å‰é˜¶æ®µ
- æ— æ³•å–æ¶ˆå¯¼å…¥
- é”™è¯¯å‘ç°æ»åï¼ˆå¦‚ä»“åº“ä¸å­˜åœ¨ï¼Œå…‹éš†ä¸€åŠæ‰æŠ¥é”™ï¼‰

### ç›®æ ‡

å®ç° GitHub å¯¼å…¥çš„å®Œæ•´è¿›åº¦å¯è§†åŒ–ï¼š
1. **ä»“åº“é¢„æ£€**ï¼šå…‹éš†å‰æ£€æŸ¥ä»“åº“æ˜¯å¦å­˜åœ¨ã€å¤§å°
2. **è¿›åº¦æ¡æ˜¾ç¤º**ï¼šåˆ†é˜¶æ®µæ˜¾ç¤ºï¼Œå¯é‡åŒ–é˜¶æ®µæ˜¾ç¤ºç™¾åˆ†æ¯”
3. **æ—¥å¿—æ˜¾ç¤º**ï¼šå›ºå®šé«˜åº¦å¯æ»šåŠ¨åŒºåŸŸï¼Œå®æ—¶å±•ç¤ºæ“ä½œæ—¥å¿—
4. **å–æ¶ˆå¯¼å…¥**ï¼šé˜¶æ®µæ€§å–æ¶ˆç‚¹ï¼Œå®‰å…¨ä¸­æ–­ä»»åŠ¡

---

## å†³ç­–è®°å½•

| å†³ç­–ç‚¹ | é€‰æ‹© | ç†ç”± |
|--------|------|------|
| åŠŸèƒ½èŒƒå›´ | è¿›åº¦æ¡ + æ—¥å¿— + å–æ¶ˆ + é¢„æ£€ | æ ¸å¿ƒä½“éªŒä¼˜åŒ–ï¼Œä¸å« UI è¿‡æ»¤é€‰é¡¹ |
| è¿›åº¦æ¡æ–¹æ¡ˆ | åˆ†é˜¶æ®µæ˜¾ç¤ºï¼ˆè¯šå®æ¨¡å¼ï¼‰ | ä¸ä¼ªé€ è¿›åº¦ï¼ŒGit é˜¶æ®µæ˜¾ç¤º"è¿›è¡Œä¸­" |
| å–æ¶ˆæœºåˆ¶ | é˜¶æ®µæ€§å–æ¶ˆç‚¹ | å®‰å…¨ç‚¹å–æ¶ˆï¼Œé¿å…è„æ•°æ® |
| æ—¥å¿—æ˜¾ç¤º | å›ºå®šé«˜åº¦å¯æ»šåŠ¨åŒºåŸŸ | ç•Œé¢æ•´æ´ï¼Œæ—¥å¿—å§‹ç»ˆå¯è§ |

---

## å®æ–½æ­¥éª¤

### CP1: ä»“åº“é¢„æ£€åŠŸèƒ½

**ç›®æ ‡**ï¼šå…‹éš†å‰é€šè¿‡ GitHub API æ£€æŸ¥ä»“åº“çŠ¶æ€

**ä»»åŠ¡**ï¼š
1. æ–°å»º `backend/infrastructure/data_loader/github_preflight.py`
   - `check_repository(owner, repo)` å‡½æ•°
   - è¿”å›ï¼šå­˜åœ¨æ€§ã€å¤§å°(KB)ã€æ˜¯å¦ç§æœ‰ã€é»˜è®¤åˆ†æ”¯
2. åœ¨ `DataImportService.import_from_github()` å¼€å¤´è°ƒç”¨é¢„æ£€
3. å¤§ä»“åº“ï¼ˆ>100MBï¼‰ç»™å‡ºè­¦å‘Šï¼Œè®©ç”¨æˆ·ç¡®è®¤

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] ä¸å­˜åœ¨çš„ä»“åº“ç§’çº§è¿”å›é”™è¯¯
- [ ] ç§æœ‰ä»“åº“æç¤ºéœ€è¦ Token
- [ ] å¤§ä»“åº“è­¦å‘Šç”¨æˆ·

**é¢„è®¡æ–‡ä»¶æ”¹åŠ¨**ï¼š
- æ–°å¢ï¼š`backend/infrastructure/data_loader/github_preflight.py`
- ä¿®æ”¹ï¼š`backend/infrastructure/data_loader/service.py`

---

### CP2: è¿›åº¦ç®¡ç†å™¨ + é˜¶æ®µæ€§å–æ¶ˆ

**ç›®æ ‡**ï¼šåç«¯è¿›åº¦ç®¡ç†ï¼Œæ”¯æŒé˜¶æ®µæ€§å–æ¶ˆ

**ä»»åŠ¡**ï¼š
1. æ–°å»º `backend/infrastructure/data_loader/progress.py`
   - `ImportProgressManager` ç±»
   - ç®¡ç†é˜¶æ®µçŠ¶æ€ã€è¿›åº¦ã€æ—¥å¿—æ”¶é›†
   - æ”¯æŒå–æ¶ˆæ ‡å¿—æ£€æŸ¥
2. å®šä¹‰å¯¼å…¥é˜¶æ®µæšä¸¾ï¼š
   ```python
   class ImportStage(Enum):
       PREFLIGHT = "ä»“åº“é¢„æ£€"
       GIT_CLONE = "å…‹éš†ä»“åº“"
       FILE_WALK = "æ‰«ææ–‡ä»¶"
       DOC_PARSE = "è§£ææ–‡æ¡£"
       VECTORIZE = "ç”Ÿæˆå‘é‡"
       COMPLETE = "å®Œæˆ"
   ```
3. æ”¹é€  `DataImportService`ï¼Œæ³¨å…¥è¿›åº¦ç®¡ç†å™¨
4. åœ¨å„é˜¶æ®µå¼€å§‹/ç»“æŸæ—¶æ›´æ–°è¿›åº¦
5. åœ¨å®‰å…¨ç‚¹æ£€æŸ¥å–æ¶ˆæ ‡å¿—

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] è¿›åº¦ç®¡ç†å™¨èƒ½è¿½è¸ªæ‰€æœ‰é˜¶æ®µ
- [ ] å–æ¶ˆæ ‡å¿—èƒ½åœ¨å®‰å…¨ç‚¹ç”Ÿæ•ˆ
- [ ] æ—¥å¿—èƒ½è¢«æ”¶é›†

**é¢„è®¡æ–‡ä»¶æ”¹åŠ¨**ï¼š
- æ–°å¢ï¼š`backend/infrastructure/data_loader/progress.py`
- ä¿®æ”¹ï¼š`backend/infrastructure/data_loader/service.py`
- ä¿®æ”¹ï¼š`backend/infrastructure/data_loader/source/github.py`

---

### CP3: å‰ç«¯è¿›åº¦ç»„ä»¶

**ç›®æ ‡**ï¼šå‰ç«¯å±•ç¤ºè¿›åº¦æ¡å’Œæ—¥å¿—

**ä»»åŠ¡**ï¼š
1. æ–°å»º `frontend/components/import_progress.py`
   - `render_import_progress()` å‡½æ•°
   - é˜¶æ®µæŒ‡ç¤ºå™¨ï¼ˆå½“å‰é˜¶æ®µé«˜äº®ï¼‰
   - è¿›åº¦æ¡ï¼ˆå¯é‡åŒ–é˜¶æ®µï¼‰
   - æ—¥å¿—åŒºåŸŸï¼ˆå›ºå®šé«˜åº¦ 150pxï¼‰
   - å–æ¶ˆæŒ‰é’®
2. æ”¹é€  `frontend/settings/data_source.py`
   - æ›¿æ¢ `st.spinner` ä¸ºæ–°è¿›åº¦ç»„ä»¶
   - ç®¡ç†å–æ¶ˆçŠ¶æ€

**UI è®¾è®¡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¦ æ­£åœ¨å¯¼å…¥ owner/repo                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é˜¶æ®µ [3/5] è§£ææ–‡æ¡£                       â”‚
â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 40% (32/80)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ æ“ä½œæ—¥å¿—                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 14:23:01 âœ… é¢„æ£€é€šè¿‡ (12MB)         â”‚ â”‚
â”‚ â”‚ 14:23:02 ğŸ”„ å¼€å§‹å…‹éš†...             â”‚ â”‚
â”‚ â”‚ 14:23:18 âœ… å…‹éš†å®Œæˆ                â”‚ â”‚
â”‚ â”‚ 14:23:19 ğŸ“„ è§£æ 32/80              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              [âŒ å–æ¶ˆ]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] é˜¶æ®µæŒ‡ç¤ºå™¨æ­£ç¡®æ˜¾ç¤º
- [ ] å¯é‡åŒ–é˜¶æ®µæ˜¾ç¤ºè¿›åº¦ç™¾åˆ†æ¯”
- [ ] æ—¥å¿—åŒºåŸŸå›ºå®šé«˜åº¦å¯æ»šåŠ¨
- [ ] å–æ¶ˆæŒ‰é’®å¯ç”¨

**é¢„è®¡æ–‡ä»¶æ”¹åŠ¨**ï¼š
- æ–°å¢ï¼š`frontend/components/import_progress.py`
- ä¿®æ”¹ï¼š`frontend/settings/data_source.py`

---

### CP4: é›†æˆä¸æµ‹è¯•

**ç›®æ ‡**ï¼šç«¯åˆ°ç«¯é›†æˆï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸

**ä»»åŠ¡**ï¼š
1. é›†æˆæµ‹è¯•ï¼šå®Œæ•´å¯¼å…¥æµç¨‹
2. æµ‹è¯•å–æ¶ˆåŠŸèƒ½
3. æµ‹è¯•é¢„æ£€å„ç§åœºæ™¯ï¼ˆä¸å­˜åœ¨ã€ç§æœ‰ã€å¤§ä»“åº“ï¼‰
4. ä¿®å¤å‘ç°çš„é—®é¢˜

**éªŒæ”¶æ ‡å‡†**ï¼š
- [ ] å°ä»“åº“å¯¼å…¥æ­£å¸¸ï¼Œè¿›åº¦æ˜¾ç¤ºæ­£ç¡®
- [ ] å¤§ä»“åº“è­¦å‘Šæ­£å¸¸
- [ ] ä¸å­˜åœ¨ä»“åº“å¿«é€Ÿå¤±è´¥
- [ ] å–æ¶ˆåŠŸèƒ½æ­£å¸¸
- [ ] æ— å›å½’é—®é¢˜

**é¢„è®¡æ–‡ä»¶æ”¹åŠ¨**ï¼š
- å¯èƒ½çš„ bug ä¿®å¤

---

## æ–‡ä»¶æ”¹åŠ¨æ¸…å•

| æ“ä½œ | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| æ–°å¢ | `backend/infrastructure/data_loader/github_preflight.py` | ä»“åº“é¢„æ£€ |
| æ–°å¢ | `backend/infrastructure/data_loader/progress.py` | è¿›åº¦ç®¡ç†å™¨ |
| æ–°å¢ | `frontend/components/import_progress.py` | å‰ç«¯è¿›åº¦ç»„ä»¶ |
| ä¿®æ”¹ | `backend/infrastructure/data_loader/service.py` | é›†æˆé¢„æ£€å’Œè¿›åº¦ |
| ä¿®æ”¹ | `backend/infrastructure/data_loader/source/github.py` | è¿›åº¦ä¸ŠæŠ¥ |
| ä¿®æ”¹ | `frontend/settings/data_source.py` | ä½¿ç”¨æ–°è¿›åº¦ç»„ä»¶ |

---

## é£é™©ä¸æ³¨æ„äº‹é¡¹

1. **Streamlit å¹¶å‘é™åˆ¶**ï¼šStreamlit å•çº¿ç¨‹æ¨¡å‹ï¼Œè¿›åº¦æ›´æ–°éœ€é€šè¿‡ session_state
2. **GitHub API é™æµ**ï¼šé¢„æ£€ä½¿ç”¨ APIï¼Œæ³¨æ„é€Ÿç‡é™åˆ¶ï¼ˆæ—  Token 60æ¬¡/å°æ—¶ï¼‰
3. **å‘åå…¼å®¹**ï¼šä¿æŒç°æœ‰ `show_progress` å‚æ•°è¡Œä¸º

---

## ä¸‹ä¸€æ­¥

ç¡®è®¤è®¡åˆ’åï¼Œä» **CP1ï¼ˆä»“åº“é¢„æ£€åŠŸèƒ½ï¼‰** å¼€å§‹æ‰§è¡Œã€‚
