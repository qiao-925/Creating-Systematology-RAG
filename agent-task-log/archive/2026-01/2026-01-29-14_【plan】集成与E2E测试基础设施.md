# 2026-01-29 【plan】集成与 E2E 测试基础设施

**任务类型**: infrastructure  
**日期**: 2026-01-29  
**任务编号**: #14  
**Agent**: -

---

## Checkpoint 状态表

| CP | 阶段 | 状态 | 完成日期 |
|----|------|------|----------|
| CP1 | 需求与范围界定 | ⬜ 待开始 | - |
| CP2 | 集成测试框架与用例 | ⬜ 待开始 | - |
| CP3 | 浏览器/E2E 测试与说明 | ⬜ 待开始 | - |
| CP4 | agents.md 与文档收尾 | ⬜ 待开始 | - |

---

## 背景与目标

### 背景

- 人类在「测试与验收」阶段的作用至关重要；多数时间应花在评估结果上。
- 原则：「有测试，就有功能。」能说清如何评估，AI 才能正确构建。
- 当前项目：单元测试较多，**集成测试与端到端测试不足**。例如各单元通过仍可能出现集成失败。
- 希望将「便捷的集成测试 + 可一键执行 + 浏览器测试」纳入工作流，提升验收效率。

### 目标

- 建立**便捷的集成测试框架**，在重要里程碑前可用。
- **集成测试用例**：可收集/生成、一键执行，逻辑与标准由人指定。
- **浏览器/E2E 测试**：与现有能力结合，支持关键流程验收。
- **测试基础设施使用说明**：预先写在 `agents.md`（或约定文档）中，避免重复解释。
- **环境隔离**：测试用例生成/运行环境与主开发 Agent 环境分离，不混淆。

### 约束与原则

- 测试用例可由 AI 生成，但**逻辑、标准、目标须由人指定**。
- 不将测试生成环境与主开发 Agent 环境混用。

---

## 待细化（后续补充）

- 集成测试覆盖范围（API、RAG 管线、数据层等）。
- 浏览器测试场景与工具选型（与现有 MCP/Streamlit 配合）。
- `agents.md` 中测试章节结构。
- 一键执行的具体形式（Makefile/脚本/CI 等）。

---

## 参考

- 用户总结：第四阶段为测试与验收；集成测试与 E2E 可显著提升该阶段效率。
- 项目现有：`tests/` 下 unit、integration、e2e、performance；`.github/workflows/tests.yml`；MCP cursor-ide-browser。
