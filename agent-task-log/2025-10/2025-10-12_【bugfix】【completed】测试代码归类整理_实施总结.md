# æµ‹è¯•ä»£ç å½’ç±»æ•´ç†æ€»ç»“

**æ‰§è¡Œæ—¥æœŸ**: 2025-10-12  
**æ‰§è¡Œæ—¶é•¿**: çº¦30åˆ†é’Ÿ  
**çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## ğŸ“‹ ä»»åŠ¡ç›®æ ‡

å°†æ•£è½åœ¨é¡¹ç›®æ ¹ç›®å½•çš„æµ‹è¯•æ–‡ä»¶ç§»åŠ¨åˆ° `tests/` ç›®å½•å¹¶è¿›è¡Œåˆç†å½’ç±»ï¼Œæå‡é¡¹ç›®ç»“æ„çš„æ¸…æ™°åº¦å’Œå¯ç»´æŠ¤æ€§ã€‚

---

## ğŸ¯ æ‰§è¡Œæ–¹æ¡ˆ

### å½’ç±»æ ‡å‡†

æ ¹æ®æµ‹è¯•æ–‡ä»¶çš„æ€§è´¨å’Œç”¨é€”ï¼Œåˆ¶å®šä»¥ä¸‹å½’ç±»æ–¹æ¡ˆï¼š

| ç±»åˆ« | ç›®å½• | ç”¨é€” |
|------|------|------|
| é›†æˆæµ‹è¯• | `tests/integration/` | æµ‹è¯•ç³»ç»Ÿå„æ¨¡å—é—´çš„é›†æˆ |
| è¯Šæ–­å·¥å…· | `tests/tools/` | é…ç½®éªŒè¯å’Œé—®é¢˜è¯Šæ–­è„šæœ¬ |

---

## ğŸ“¦ ç§»åŠ¨æ–‡ä»¶æ¸…å•

### å·²ç§»åŠ¨æ–‡ä»¶ï¼ˆ6ä¸ªï¼‰

| åŸè·¯å¾„ï¼ˆæ ¹ç›®å½•ï¼‰ | æ–°è·¯å¾„ | æ–‡ä»¶ç±»å‹ |
|-----------------|--------|---------|
| `test_phoenix_integration.py` | `tests/integration/test_phoenix_integration.py` | é›†æˆæµ‹è¯• |
| `test_hf_mirror.py` | `tests/tools/test_hf_mirror.py` | é…ç½®éªŒè¯å·¥å…· |
| `test_env_vars.py` | `tests/tools/test_env_vars.py` | ç¯å¢ƒå˜é‡éªŒè¯ |
| `test_hf_config.py` | `tests/tools/test_hf_config.py` | é…ç½®æµ‹è¯•å·¥å…· |
| `check_hf_config.py` | `tests/tools/check_hf_config.py` | é…ç½®æ£€æŸ¥å·¥å…· |
| `download_model.py` | `tests/tools/download_model.py` | æ¨¡å‹ä¸‹è½½å·¥å…· |

### æ–‡ä»¶è¯´æ˜

#### 1. test_phoenix_integration.py
- **ç±»å‹**: é›†æˆæµ‹è¯•
- **åŠŸèƒ½**: æµ‹è¯•Phoenixå¯è§‚æµ‹æ€§å¹³å°ä¸RAGç³»ç»Ÿçš„é›†æˆ
- **åŒ…å«æµ‹è¯•**:
  - Phoenixå¯¼å…¥æµ‹è¯•
  - Phoenixå·¥å…·æ¨¡å—æµ‹è¯•
  - LlamaDebugHandleré›†æˆæµ‹è¯•
  - QueryEngineè°ƒè¯•æ”¯æŒæµ‹è¯•
  - ChatManagerè°ƒè¯•æ”¯æŒæµ‹è¯•

#### 2. HuggingFace é…ç½®å·¥å…·ï¼ˆ5ä¸ªæ–‡ä»¶ï¼‰
- **test_hf_mirror.py**: æµ‹è¯•HFé•œåƒé…ç½®æ˜¯å¦ç”Ÿæ•ˆ
- **test_env_vars.py**: éªŒè¯ç¯å¢ƒå˜é‡è®¾ç½®
- **test_hf_config.py**: å®Œæ•´çš„HFé…ç½®å’Œæ¨¡å‹åŠ è½½æµ‹è¯•
- **check_hf_config.py**: å¿«é€Ÿæ£€æŸ¥HFé…ç½®çŠ¶æ€ï¼ˆæ— ä¾èµ–ï¼‰
- **download_model.py**: æ‰‹åŠ¨ä»é•œåƒä¸‹è½½æ¨¡å‹

---

## ğŸ†• æ–°å»ºå†…å®¹

### 1. tests/tools/ ç›®å½•
æ–°å»ºç›®å½•ç”¨äºå­˜æ”¾è¯Šæ–­å’Œé…ç½®å·¥å…·ã€‚

### 2. tests/tools/__init__.py
åŒ…åˆå§‹åŒ–æ–‡ä»¶ï¼Œæä¾›æ¨¡å—è¯´æ˜ã€‚

### 3. tests/tools/README.md
è¯¦ç»†çš„å·¥å…·ä½¿ç”¨æŒ‡å—ï¼ŒåŒ…å«ï¼š
- æ–‡ä»¶è¯´æ˜è¡¨æ ¼
- ä½¿ç”¨æ–¹æ³•ç¤ºä¾‹
- æ•…éšœæ’æŸ¥æµç¨‹
- ç›¸å…³æ–‡æ¡£é“¾æ¥
- æ³¨æ„äº‹é¡¹

---

## ğŸ“ æ–‡æ¡£æ›´æ–°

### 1. tests/README.md
- âœ… æ›´æ–°æµ‹è¯•ç»“æ„å›¾ï¼Œæ·»åŠ  `tests/tools/` ç›®å½•
- âœ… æ·»åŠ "ğŸ”§ è¯Šæ–­å·¥å…·"ç« èŠ‚
- âœ… æä¾›å¿«é€Ÿä½¿ç”¨å‘½ä»¤
- âœ… æ·»åŠ æ•…éšœæ’æŸ¥æµç¨‹

### 2. agent-task-log/2025-10-12_HuggingFaceé•œåƒä¸ç¦»çº¿æ¨¡å¼é…ç½®_å®æ–½æ€»ç»“.md
- âœ… æ›´æ–°å·¥å…·è·¯å¾„å¼•ç”¨ï¼š`python test_hf_config.py` â†’ `python tests/tools/test_hf_config.py`

---

## ğŸ“Š æ•´ç†å‰åå¯¹æ¯”

### æ•´ç†å‰

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ test_phoenix_integration.py    âŒ æ•£è½æ ¹ç›®å½•
â”œâ”€â”€ test_hf_mirror.py              âŒ æ•£è½æ ¹ç›®å½•
â”œâ”€â”€ test_env_vars.py               âŒ æ•£è½æ ¹ç›®å½•
â”œâ”€â”€ test_hf_config.py              âŒ æ•£è½æ ¹ç›®å½•
â”œâ”€â”€ check_hf_config.py             âŒ æ•£è½æ ¹ç›®å½•
â”œâ”€â”€ download_model.py              âŒ æ•£è½æ ¹ç›®å½•
â””â”€â”€ tests/
    â”œâ”€â”€ unit/
    â”œâ”€â”€ integration/
    â””â”€â”€ performance/
```

**é—®é¢˜**ï¼š
- âŒ æµ‹è¯•æ–‡ä»¶æ•£è½åœ¨æ ¹ç›®å½•ï¼ŒæŸ¥æ‰¾ä¸ä¾¿
- âŒ ç¼ºä¹ç»„ç»‡ç»“æ„
- âŒ ä¸åˆ©äºç»´æŠ¤

### æ•´ç†å

```
é¡¹ç›®æ ¹ç›®å½•/                        âœ… æ ¹ç›®å½•æ•´æ´
â””â”€â”€ tests/                         âœ… ç»Ÿä¸€ç®¡ç†
    â”œâ”€â”€ unit/                      # å•å…ƒæµ‹è¯•ï¼ˆ60+ä¸ªï¼‰
    â”œâ”€â”€ integration/               # é›†æˆæµ‹è¯•ï¼ˆ20+ä¸ªï¼‰
    â”‚   â””â”€â”€ test_phoenix_integration.py
    â”œâ”€â”€ performance/               # æ€§èƒ½æµ‹è¯•ï¼ˆ13+ä¸ªï¼‰
    â””â”€â”€ tools/                     # ğŸ†• è¯Šæ–­å·¥å…·ï¼ˆ6ä¸ªï¼‰
        â”œâ”€â”€ __init__.py
        â”œâ”€â”€ README.md
        â”œâ”€â”€ check_hf_config.py
        â”œâ”€â”€ test_hf_config.py
        â”œâ”€â”€ test_hf_mirror.py
        â”œâ”€â”€ test_env_vars.py
        â””â”€â”€ download_model.py
```

**æ”¹è¿›**ï¼š
- âœ… æ ¹ç›®å½•æ•´æ´ï¼Œæ— æµ‹è¯•æ–‡ä»¶æ®‹ç•™
- âœ… æµ‹è¯•æ–‡ä»¶æŒ‰åŠŸèƒ½å½’ç±»
- âœ… å·¥å…·æ–‡ä»¶é›†ä¸­ç®¡ç†ï¼Œé…æœ‰ä½¿ç”¨æ–‡æ¡£
- âœ… ç»“æ„æ¸…æ™°ï¼Œæ˜“äºæŸ¥æ‰¾å’Œç»´æŠ¤

---

## ğŸ¯ æœ€ç»ˆæµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ conftest.py              # å…±äº« fixtures å’Œé…ç½®
â”œâ”€â”€ __init__.py              # åŒ…åˆå§‹åŒ–
â”œâ”€â”€ README.md                # æµ‹è¯•ä½¿ç”¨æŒ‡å—ï¼ˆå·²æ›´æ–°ï¼‰
â”‚
â”œâ”€â”€ unit/                    # å•å…ƒæµ‹è¯•ï¼ˆ60+ä¸ªï¼‰
â”‚   â”œâ”€â”€ test_config.py
â”‚   â”œâ”€â”€ test_data_loader.py
â”‚   â”œâ”€â”€ test_indexer.py
â”‚   â”œâ”€â”€ test_query_engine.py
â”‚   â”œâ”€â”€ test_chat_manager.py
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ integration/             # é›†æˆæµ‹è¯•ï¼ˆ20+ä¸ªï¼‰
â”‚   â”œâ”€â”€ test_data_pipeline.py
â”‚   â”œâ”€â”€ test_query_pipeline.py
â”‚   â””â”€â”€ test_phoenix_integration.py  â† ğŸ†• ç§»å…¥
â”‚
â”œâ”€â”€ performance/             # æ€§èƒ½æµ‹è¯•ï¼ˆ13+ä¸ªï¼‰
â”‚   â””â”€â”€ test_performance.py
â”‚
â”œâ”€â”€ tools/                   # ğŸ†• è¯Šæ–­å·¥å…·ï¼ˆ6ä¸ªï¼‰
â”‚   â”œâ”€â”€ __init__.py          â† ğŸ†• åˆ›å»º
â”‚   â”œâ”€â”€ README.md            â† ğŸ†• åˆ›å»º
â”‚   â”œâ”€â”€ check_hf_config.py   â† ğŸ†• ç§»å…¥
â”‚   â”œâ”€â”€ test_hf_config.py    â† ğŸ†• ç§»å…¥
â”‚   â”œâ”€â”€ test_hf_mirror.py    â† ğŸ†• ç§»å…¥
â”‚   â”œâ”€â”€ test_env_vars.py     â† ğŸ†• ç§»å…¥
â”‚   â””â”€â”€ download_model.py    â† ğŸ†• ç§»å…¥
â”‚
â””â”€â”€ fixtures/                # æµ‹è¯•æ•°æ®
    â””â”€â”€ sample_docs/
```

---

## âœ… éªŒè¯ç»“æœ

### 1. æ–‡ä»¶ç§»åŠ¨å®Œæ•´æ€§

```bash
# æ ¹ç›®å½•æ— æµ‹è¯•æ–‡ä»¶æ®‹ç•™
$ find . -maxdepth 1 -name "*.py" -type f | grep -E "(test_|check_|download_)"
# è¾“å‡º: 0 ä¸ªæ–‡ä»¶ âœ…
```

### 2. æ–°ç›®å½•ç»“æ„

```bash
$ ls tests/tools/
__init__.py
README.md
check_hf_config.py
download_model.py
test_env_vars.py
test_hf_config.py
test_hf_mirror.py
```

âœ… æ‰€æœ‰6ä¸ªæ–‡ä»¶å·²æˆåŠŸç§»åŠ¨

### 3. æ–‡æ¡£å®Œæ•´æ€§

- âœ… `tests/tools/__init__.py` - å·²åˆ›å»º
- âœ… `tests/tools/README.md` - è¯¦ç»†ä½¿ç”¨æŒ‡å—
- âœ… `tests/README.md` - å·²æ›´æ–°ç»“æ„è¯´æ˜å’Œä½¿ç”¨æŒ‡å—
- âœ… ç›¸å…³æ–‡æ¡£è·¯å¾„å¼•ç”¨å·²æ›´æ–°

---

## ğŸ“š ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿä½¿ç”¨è¯Šæ–­å·¥å…·

```bash
# å¿«é€Ÿæ£€æŸ¥é…ç½®
uv run python tests/tools/check_hf_config.py

# å®Œæ•´é…ç½®æµ‹è¯•
uv run python tests/tools/test_hf_config.py

# æµ‹è¯•é•œåƒ
uv run python tests/tools/test_hf_mirror.py

# éªŒè¯ç¯å¢ƒå˜é‡
uv run python tests/tools/test_env_vars.py

# æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹
uv run python tests/tools/download_model.py

# æµ‹è¯•Phoenixé›†æˆ
uv run python tests/integration/test_phoenix_integration.py
```

### æ•…éšœæ’æŸ¥æµç¨‹

é‡åˆ°æ¨¡å‹åŠ è½½è¶…æ—¶é—®é¢˜æ—¶ï¼š

1. **æ£€æŸ¥é…ç½®** â†’ `tests/tools/check_hf_config.py`
2. **éªŒè¯ç¯å¢ƒå˜é‡** â†’ `tests/tools/test_env_vars.py`
3. **æµ‹è¯•é•œåƒ** â†’ `tests/tools/test_hf_mirror.py`
4. **æ‰‹åŠ¨ä¸‹è½½** â†’ `tests/tools/download_model.py`
5. **å®Œæ•´æµ‹è¯•** â†’ `tests/tools/test_hf_config.py`

è¯¦ç»†è¯´æ˜è§ï¼š`tests/tools/README.md`

---

## ğŸ¯ æ”¶ç›Šæ€»ç»“

### é¡¹ç›®ç»“æ„æ”¹è¿›

| æŒ‡æ ‡ | æ•´ç†å‰ | æ•´ç†å | æ”¹è¿› |
|------|--------|--------|------|
| æ ¹ç›®å½•æµ‹è¯•æ–‡ä»¶ | 6ä¸ª | 0ä¸ª | âœ… 100%æ¸…ç† |
| æµ‹è¯•ç›®å½•ç»“æ„ | 3å±‚ | 4å±‚ | âœ… å¢åŠ å·¥å…·å±‚ |
| å·¥å…·æ–‡æ¡£ | æ—  | å®Œæ•´ | âœ… æ–°å¢README |
| æŸ¥æ‰¾æ•ˆç‡ | ä½ | é«˜ | âœ… åˆ†ç±»æ¸…æ™° |

### ç»´æŠ¤æ€§æå‡

- âœ… **ç»“æ„æ¸…æ™°**: æµ‹è¯•æ–‡ä»¶æŒ‰åŠŸèƒ½åˆ†ç±»ï¼Œä¸€ç›®äº†ç„¶
- âœ… **æ˜“äºæŸ¥æ‰¾**: è¯Šæ–­å·¥å…·é›†ä¸­åœ¨ `tests/tools/`ï¼Œå¿«é€Ÿå®šä½
- âœ… **æ–‡æ¡£å®Œå–„**: æä¾›è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—å’Œæ•…éšœæ’æŸ¥æµç¨‹
- âœ… **è§„èŒƒç»Ÿä¸€**: æ‰€æœ‰æµ‹è¯•ç›¸å…³æ–‡ä»¶ç»Ÿä¸€ç®¡ç†

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [æµ‹è¯•ä½¿ç”¨æŒ‡å—](../tests/README.md) - å®Œæ•´æµ‹è¯•ä½“ç³»è¯´æ˜
- [è¯Šæ–­å·¥å…·æŒ‡å—](../tests/tools/README.md) - å·¥å…·è¯¦ç»†ä½¿ç”¨è¯´æ˜
- [HFé•œåƒé…ç½®å®æ–½æ€»ç»“](2025-10-12_HuggingFaceé•œåƒä¸ç¦»çº¿æ¨¡å¼é…ç½®_å®æ–½æ€»ç»“.md)
- [Phoenixé›†æˆå®æ–½æ€»ç»“](2025-10-12_RAGå¯è§‚æµ‹æ€§é›†æˆ_å®æ–½æ€»ç»“.md)

---

## ğŸš€ åç»­å»ºè®®

### çŸ­æœŸ
- âœ… å·²å®Œæˆï¼šæµ‹è¯•æ–‡ä»¶å½’ç±»å’Œæ–‡æ¡£æ›´æ–°
- å»ºè®®ï¼šå®šæœŸæ£€æŸ¥æ–°å¢æµ‹è¯•æ–‡ä»¶ï¼Œä¿æŒç»“æ„æ•´æ´

### ä¸­æœŸ
- è€ƒè™‘ï¼šä¸ºå·¥å…·è„šæœ¬æ·»åŠ å‘½ä»¤è¡Œå‚æ•°æ”¯æŒ
- è€ƒè™‘ï¼šå°†è¯Šæ–­å·¥å…·æ•´åˆåˆ° Makefile

### é•¿æœŸ
- è€ƒè™‘ï¼šå¼€å‘è‡ªåŠ¨åŒ–çš„é…ç½®æ£€æŸ¥å’Œé—®é¢˜è¯Šæ–­å·¥å…·
- è€ƒè™‘ï¼šå°†è¯Šæ–­å·¥å…·é›†æˆåˆ°CI/CDæµç¨‹

---

**æ€»ç»“**: é€šè¿‡æœ¬æ¬¡æ•´ç†ï¼Œé¡¹ç›®æµ‹è¯•ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œå·¥å…·æ–‡ä»¶é›†ä¸­ç®¡ç†ï¼Œå¤§å¹…æå‡äº†é¡¹ç›®çš„å¯ç»´æŠ¤æ€§å’Œå¼€å‘ä½“éªŒã€‚æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ç°åœ¨éƒ½æœ‰æ˜ç¡®çš„å½’å±ï¼Œé…æœ‰å®Œå–„çš„æ–‡æ¡£è¯´æ˜ï¼Œä¾¿äºå›¢é˜Ÿåä½œå’Œæ–°æˆå‘˜ä¸Šæ‰‹ã€‚

**æœ€åæ›´æ–°**: 2025-10-12

